
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Plurals (ngettext) Â· c-3po javascript es6 localization tool</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="jsx-tag-jt.html" />
    
    
    <link rel="prev" href="tag-gettext--t-.html" />
    

    <style>
    @media only screen and (max-width: 640px) {
        .book-header .hidden-mobile {
            display: none;
        }
    }
    </style>
    <script>
        window["gitbook-plugin-github-buttons"] = {"repo":"c-3po-org/c-3po","types":["star"],"size":"small"};
    </script>

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        <li class="header">General</li>
        
        
    
        <li class="chapter " data-level="1.1" data-path="./">
            
                <a href="./">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="chapter1.html">
            
                <a href="chapter1.html">
            
                    
                    Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuration(babel plugin)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="configuration-c-3po-lib.html">
            
                <a href="configuration-c-3po-lib.html">
            
                    
                    Configuration(c-3po lib API)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="translator-comments.html">
            
                <a href="translator-comments.html">
            
                    
                    Leaving comments for the translator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="validation.html">
            
                <a href="validation.html">
            
                    
                    Validation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="multiline-strings.html">
            
                <a href="multiline-strings.html">
            
                    
                    Multiline strings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="aliasing.html">
            
                <a href="aliasing.html">
            
                    
                    Aliasing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="c-3po-ignore.html">
            
                <a href="c-3po-ignore.html">
            
                    
                    Ignoring code blocks
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">functions</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="tag-gettext--t-.html">
            
                <a href="tag-gettext--t-.html">
            
                    
                    t (tag-gettext)
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.2" data-path="ngettext.html">
            
                <a href="ngettext.html">
            
                    
                    Plurals (ngettext)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="jsx-tag-jt.html">
            
                <a href="jsx-tag-jt.html">
            
                    
                    jt (jsx-gettext)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="gettext.html">
            
                <a href="gettext.html">
            
                    
                    gettext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="contexts.html">
            
                <a href="contexts.html">
            
                    
                    contexts
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Tutorials</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="quick-start.html">
            
                <a href="quick-start.html">
            
                    
                    Quick Start
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="localization-with-webpack-and-c-3po.html">
            
                <a href="localization-with-webpack-and-c-3po.html">
            
                    
                    Localization with webpack and c-3po
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="translations-without-transpile.html">
            
                <a href="translations-without-transpile.html">
            
                    
                    Translate without translpile
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">FAQ</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="why-use-msgid-for-ngettext.html">
            
                <a href="why-use-msgid-for-ngettext.html">
            
                    
                    Why to use msgid tag for ngettext
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="why-po-is-not-updated.html">
            
                <a href="why-po-is-not-updated.html">
            
                    
                    Why .pot(.po) file is not generated/updated
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="CHANGELOG.html">
            
                <a href="CHANGELOG.html">
            
                    
                    CHANGELOG
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="MIGRATION.html">
            
                <a href="MIGRATION.html">
            
                    
                    Migration Guide
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="." >Plurals (ngettext)</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="ngettext">ngettext</h1>
<p>This is an implementation of <strong>ngettext</strong> function from standard <strong>GNU</strong> <strong>gettext. </strong>But also it&apos;s standard behavior can be extended by some extra configuration for handling different number of plural forms than 2. By default it works as expected with 2 plural forms. So you can use it even when you don&apos;t have actual translations, just for having support for plural forms in your code.</p>
<h2 id="live-demo">Live demo</h2>
<blockquote>
<p>this demo works without transpile step, consider using babel-plugin-c-3po for production usage</p>
</blockquote>
<p><a href="https://jsfiddle.net/AlexMost/mc2pd1on/2/" target="_blank">https://jsfiddle.net/AlexMost/mc2pd1on/2/</a></p>
<h3 id="usage">Usage:</h3>
<pre><code class="lang-js"><span class="hljs-keyword">import</span> { ngettext, msgid } <span class="hljs-keyword">from</span> <span class="hljs-string">&apos;c-3po&apos;</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params">n</span>) </span>{
    <span class="hljs-keyword">return</span> ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n)
}
</code></pre>
<blockquote>
<p>This example works out of the box without no extra configuration for <strong>c-3po</strong> plugin.</p>
</blockquote>
<p>You may noticed that the first argument for <strong>ngettext</strong> is tagged with <strong>msgid</strong> tag. 
This may seem a little bit weird, but this is the only way to find translations by <strong>msgid</strong> without code transpilation with babel plugin. 
User friendly checks on extract and resolve steps will not let you forgive about that.
More details about why we are using <strong>msgid</strong> tag are <a href="why-use-msgid-for-ngettext.html">here</a>.</p>
<h3 id="ngettext-format">ngettext format</h3>
<p><strong>valid:</strong></p>
<pre><code class="lang-js">ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n)
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${1}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${1}</span> times clicked`</span>, <span class="hljs-number">1</span>)
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${this.count}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${this.count}</span> times clicked`</span>, <span class="hljs-keyword">this</span>.count)
</code></pre>
<p><strong>invalid:</strong></p>
<pre><code class="lang-js">ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>) <span class="hljs-comment">// plural number argument is missing</span>
ngettext(<span class="hljs-string">`<span class="hljs-subst">${n}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${n}</span> times clicked`</span>, n) <span class="hljs-comment">// msgid tag for the first argument is missing</span>
<span class="hljs-comment">// only identifiers and member expressions are allowed inside translated templates.</span>
ngettext(msgid<span class="hljs-string">`<span class="hljs-subst">${fn()}</span> time clicked`</span>, <span class="hljs-string">`<span class="hljs-subst">${fn()}</span> times clicked`</span>, fn())
</code></pre>
<h3 id="po-extraction">.po extraction</h3>
<p>We will extract this from the example above:</p>
<pre><code>#: src/ngettextDemo.js:19
msgid &quot;${ n } time clicked&quot;
msgid_plural &quot;${ n } times clicked&quot;
msgstr[0] &quot;&quot;
msgstr[1] &quot;&quot;
</code></pre><h3 id="resolve-translations">Resolve translations</h3>
<p>Assume that translator added translations to our previous extracted entry:</p>
<pre><code>#: src/ngettextDemo.js:19
msgid &quot;${ n } time clicked&quot;
msgid_plural &quot;${ n } times clicked&quot;
msgstr[0] &quot;${ n } time clicked [translated]&quot;
msgstr[1] &quot;${ n } times clicked [translated]&quot;
</code></pre><p>The resulting code (after transpilation will look like):</p>
<pre><code class="lang-js"><span class="hljs-meta">&quot;use strict&quot;</span>;
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_tag_ngettext</span>(<span class="hljs-params">n, args</span>) </span>{ 
    <span class="hljs-keyword">return</span> args[+(n != <span class="hljs-number">1</span>)];
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">return</span> _tag_ngettext(n, [ n + <span class="hljs-string">&quot; time clicked [translated]&quot;</span>, n + <span class="hljs-string">&quot; times clicked [translated]&quot;</span> ]));
}
</code></pre>
<p>There is a new extra function in our file - _tag_ngettext, but you don&apos;t need to worry much about it, because this function is autogenerated by c-3po and may change in future without requiring any changes to your code.</p>
<h3 id="plural-forms-that-are-different-from-default-english">Plural forms that are different from default (English)</h3>
<p>There are cases when your source code uses string literals from some different language 
than English. And here is the point when usage of ngettext becomes not so clear. 
For instance, you decided to write string literals in Ukrainian in your sources, 
because at the time of the first release it was a single language for your project. 
At some point, you decided to localize your strings and want to use ngettext for plurals. 
Ukrainian language has 3 plural forms, but standard ngettext has only 2 arguments for them, 
so which one of those 3 plural forms must be passed to ngettext function? 
c-3po suggests quite a nice solution for this problem. 
You can configure the number of plural forms arguments for ngettext by 
<strong><a href="configuration.html#configdefaultheaders-object">defaultHeaders</a></strong> property in config 
or by headers in Ukrainian the <strong>locale .po file</strong>. But still c-3po will use 
<strong>defaultHeaders</strong> on resolve if translations was not found. 
By default c-3po uses this headers:</p>
<pre><code>&apos;content-type&apos;: &apos;text/plain; charset=UTF-8&apos;
&apos;plural-forms&apos;: &apos;nplurals=2; plural=(n!=1);&apos;
</code></pre><p>So, if you want to use <strong>ngettext</strong> with Ukrainian locale, you should change <a href="#configdefaultheaders-object">defaultHeaders</a> setting to:</p>
<pre><code>&apos;content-type&apos;: &apos;text/plain; charset=UTF-8&apos;
&apos;plural-forms&apos;: &apos;nplurals=3; plural=(n%10==1 &amp;&amp; n%100!=11 ? 0 : n%10&gt;=2 &amp;&amp; n%10&lt;=4 &amp;&amp; (n%100&lt;10 || n%100&gt;=20) ? 1 : 2);&apos;,
</code></pre><blockquote>
<p>Here is a link where you can search for an appropriate headers for some other locales - <a href="http://docs.translatehouse.org/projects/localization-guide/en/latest/l10n/pluralforms.html" target="_blank">http://docs.translatehouse.org/projects/localization-guide/en/latest/l10n/pluralforms.html</a></p>
</blockquote>
<p>So, you need to make sure to use correct defaultHeaders. Those headers must correspond to your default locale.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="tag-gettext--t-.html" class="navigation navigation-prev " aria-label="Previous page: t (tag-gettext)">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="jsx-tag-jt.html" class="navigation navigation-next " aria-label="Next page: jt (jsx-gettext)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Plurals (ngettext)","level":"2.2","depth":1,"next":{"title":"jt (jsx-gettext)","level":"2.3","depth":1,"path":"jsx-tag-jt.md","ref":"jsx-tag-jt.md","articles":[]},"previous":{"title":"t (tag-gettext)","level":"2.1","depth":1,"path":"tag-gettext--t-.md","ref":"tag-gettext--t-.md","articles":[]},"dir":"ltr"},"config":{"plugins":["anchorjs","github-buttons","github-edit","ga","toc"],"root":"./gitbook","styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"},"pluginsConfig":{"toc":{},"search":{},"lunr":{"ignoreSpecialCharacters":false,"maxIndexSize":1000000},"fontsettings":{"family":"sans","size":2,"theme":"white"},"highlight":{},"github-edit":{"repo":"c-3po-org/c-3po","branch":"master"},"github-buttons":{"repo":"c-3po-org/c-3po","types":["star"],"size":"small"},"ga":{"configuration":"auto","token":"UA-90721450-1"},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"edit-link":{"base":"https://github.com/c-3po-org/c-3po/edit/master/gitbook","label":"Edit This Page"},"theme-default":{"showLevel":false,"styles":{"ebook":"styles/ebook.css","epub":"styles/epub.css","mobi":"styles/mobi.css","pdf":"styles/pdf.css","print":"styles/print.css","website":"styles/website.css"}},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"c-3po javascript es6 localization tool","gitbook":"*"},"file":{"path":"ngettext.md","mtime":"2017-04-05T19:39:32.000Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2017-11-06T19:54:17.956Z"},"basePath":".","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="gitbook/gitbook.js"></script>
    <script src="gitbook/theme.js"></script>
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.1/anchor.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-buttons/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-github-edit/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

